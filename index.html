<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pushin' g5</title>
    <meta charset="UTF-8" />
    <meta name="description" content="A birthday present for Anna-Maja Kazarian, to help her earn her PM title." />
    <meta name="author" content="skrewz02" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="Anna-Maja, Kazarian, chess, parody, song, birthday, Bee Gees" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cinzel|Fauna+One">
    <style>
      body {
        margin: 0;
        font-family: 'Fauna One', serif;
        font-size: 20px;
        font-family: Arial, Helvetica, sans-serif;
        color: white;
        background-color: #333;
        text-align: justify;
      }

      a {
        color: #90d5ff;
        text-decoration: none;
      }

      h1 {
        font-family: Cinzel, serif;
        text-align: center;
        max-width: 80%;
        font-size: 64px;
        margin: auto;
        padding: 20px 10px;
      }

      h2 {
        font-family: Cinzel, serif;
        text-align: center;
        font-size: 36px;
        color: #ff8488;
      }

      h3 {
        text-align: center;
        font-size: 24px;
      }

      h4 {
        text-align: center;
        font-size: 24px;
        color: #ff8488;
      }
      
      .header {
        background-color: #381666;
        padding: 1px;
        font-size: 28px;
        text-align: center;
      }

      .content {
        padding: 0% 10%;
      }

      .section {
        padding: 32px 10%;
      }

	  .highlight {
        color: #ff8488;
      }

	  .centre-text {
		text-align: center;
	  }

	  .centre-img {
		display: block;
		margin-left: auto;
		margin-right: auto;
	  }

      * {box-sizing: border-box;}

	  #question_wrapper {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;
		align-content: space-between;
		width: 810px;
		height: 850px;
		margin: 0 auto;
	  }

	  #controls_wrapper {
		padding: 5px;
		text-align: center;
	  }
		
	  .tile {
		border: 2px solid grey;
	  }
		
	  .selected {
		border: 2px solid cyan !important;
	  }

	  .tile img {
		object-fit: contain;
		width: 250px;
		height: 250px;
	  }
    </style>
  </head>
  
  <body>
    <div class="header">
      <h1><span class="highlight">PM</span> Anna-Maja Kazarian</h1>
	  <img src="annamajaSing.gif" alt="An emote of Anna-Maja singing" width="112" height="112">
      <p>07.01.2026</p>
    </div>

    <div class="content">

      <div id="captcha" class="section">
		<img class="centre-img" src="restricted.png" alt="A sign restricting access to players rated 2000 and above" width="255" height="240">

        <h2>WARNING</h2>

        <p>This content is not suitable for patzers. Please complete the captcha below to unlock your gift.</p>
		  
        <h3>Select all moves that are blunders</h3>

        <div id="question_wrapper"></div>
        <div id="controls_wrapper">
          <button id="captcha_button" onclick="click_button()">Check answer</button>
        </div>
		<p id="captcha_result" class="centre-text"></p>
      </div>

    </div>

    <!-- Captcha, modifying the code of u/yes_i_relapsed from r/CodingHelp  -->
    <script>
      var questions = {
		right_tiles: [
			"https://skrewz07.github.io/annamaja/captcha/moves01.png",
			"https://skrewz07.github.io/annamaja/captcha/moves02.png",
			"https://skrewz07.github.io/annamaja/captcha/moves03.png",
			"https://skrewz07.github.io/annamaja/captcha/moves04.png",
			"https://skrewz07.github.io/annamaja/captcha/moves05.png",
			"https://skrewz07.github.io/annamaja/captcha/moves06.png",
			"https://skrewz07.github.io/annamaja/captcha/moves07.png",
			"https://skrewz07.github.io/annamaja/captcha/moves08.png"
		],
		wrong_tiles: [
			"https://skrewz07.github.io/annamaja/captcha/moves09.png",
			"https://skrewz07.github.io/annamaja/captcha/moves10.png",
			"https://skrewz07.github.io/annamaja/captcha/moves11.png",
			"https://skrewz07.github.io/annamaja/captcha/moves12.png",
			"https://skrewz07.github.io/annamaja/captcha/moves13.png",
			"https://skrewz07.github.io/annamaja/captcha/moves14.png",
			"https://skrewz07.github.io/annamaja/captcha/moves15.png",
			"https://skrewz07.github.io/annamaja/captcha/moves16.png"
		]
	  };
	  var attempts = 0;

	  function randint(min, max) {
		return Math.floor(Math.random() * (max - min + 1) + min);
	  }

	  function load_question() {
		var correct_answers = randint(3,6);
		var right_shuffled = questions.right_tiles.sort(() => 0.5 - Math.random());
		var wrong_shuffled = questions.wrong_tiles.sort(() => 0.5 - Math.random());
		var tiles = [].concat(right_shuffled.slice(0,correct_answers), wrong_shuffled.slice(0,9-correct_answers));
		var tiles_shuffled = tiles.sort(() => 0.5 - Math.random());
		tiles_str = "";
		for (tile of tiles_shuffled) {
		  tiles_str += `<div class='tile' onclick='select_tile(this)'><img src='${tile}'></div>`;
		}
		document.getElementById('question_wrapper').innerHTML = tiles_str;
		document.getElementById('captcha_result').innerHTML = ``;
		document.getElementById('captcha_button').innerHTML = `Check answer`;
	  }

	  load_question();

	  function select_tile(tile) {
		tile.classList.toggle("selected");
	  }

	  function click_button() {
		if (document.getElementById('captcha_button').innerHTML == `Retry captcha`) {
		  load_question();
		}
		else {
		  check_tiles();
		}
	  }

	  function check_tiles() {
		attempts++;
		var points = 0;
		var all_tiles = document.getElementById('question_wrapper').childNodes;
		for (tile of all_tiles) {
		  if (questions.right_tiles.includes(tile.childNodes[0].src)) {
			if (tile.classList.contains("selected")) {
			  points++;
			}
		  }
		  else {
			if (!tile.classList.contains("selected")) {
			  points++;
			}
		  }
		}
		if (points == 9) {
		  document.getElementById('captcha_result').innerHTML = `You got ${points} / 9 correct! <br/> Welcome Master, you may <a href="lyrics.html">proceed</a> to your gift now.`;
		}
		else {
		  if (attempts >= 3) {
			document.getElementById('captcha_result').innerHTML = `You got ${points} / 9 correct, patzer. This is becoming painful to watch. You could try again, or you could <a href="lyrics.html">skip ahead</a> to your gift, it'll be our little secret.`;
		  }
		  else {
			var courses = ["https://www.chessable.com/starting-out-1e4-e5/course/245608/","https://www.chessable.com/starting-out-1d4-d5/course/351858/"];
			var courseID = randint(0,1);
			document.getElementById('captcha_result').innerHTML = `You got ${points} / 9 correct, patzer. Perhaps you should <a href="${courses[courseID]}" target="_blank">study a bit</a> before trying again.`;
		  }
		}
		document.getElementById('captcha_button').innerHTML = `Retry captcha`;
	  }
  </script>

  </body>
</html>
